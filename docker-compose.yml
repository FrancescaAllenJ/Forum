services:
  forum:
    image: forum:latest
    build:
      context: .
      dockerfile: Dockerfile

    ports:
      - "8080:8080"

    # Mount ONLY the files that must stay editable/persistent
    volumes:
      - ./forum.db:/app/forum.db          # database persistence
      - ./templates:/app/templates        # HTML templates
      - ./static:/app/static              # CSS/images/static files

    # DO NOT mount the entire project â€” it deletes the compiled binary
    working_dir: /app

    restart: unless-stopped
